window.console&&(console=console||{log:function(){}}),function(t,e){"function"==typeof define&&define.amd?define(["$"],e):"object"==typeof exports?module.exports=e():t.jeDate=e(window.jQuery||$)}(this,function(t){function e(t,e){this.opts=e,this.valCell=t,this.init()}var a={},i=document,n=/\w+|d+/g,s=function(t){return window.parseInt(t,10)},o={skinCell:"jedateblue",format:"YYYY-MM-DD hh:mm:ss",minDate:"1900-01-01 00:00:00",maxDate:"2099-12-31 23:59:59"};t.fn.jeDate=function(a){return this.each(function(){return new e(t(this),a||{})})},t.extend({jeDate:function(a,i){return t(a).each(function(){return new e(t(this),i||{})})}}),a.docScroll=function(t){return t=t?"scrollLeft":"scrollTop",i.body[t]|i.documentElement[t]},a.winarea=function(t){return i.documentElement[t?"clientWidth":"clientHeight"]},a.isShow=function(t,e){t.css({display:1!=e?"none":"block"})},a.isLeap=function(t){return t%100!==0&&t%4===0||t%400===0},a.getDaysNum=function(t,e){var i=31;switch(s(e)){case 2:i=a.isLeap(t)?29:28;break;case 4:case 6:case 9:case 11:i=30}return i},a.getYM=function(t,e,a){var i=new Date(t,e-1);return i.setMonth(e-1+a),{y:i.getFullYear(),m:i.getMonth()+1}},a.getPrevMonth=function(t,e,i){return a.getYM(t,e,0-(i||1))},a.getNextMonth=function(t,e,i){return a.getYM(t,e,i||1)},a.digit=function(t){return 10>t?"0"+(0|t):t},a.IsNum=function(t){return null!=t&&""!=t?!isNaN(t):!1},a.parse=function(t,e,i){t=t.concat(e);var n="hh:mm"==a.parseCheck(i,!1).substring(0,5),s=2;return i.replace(/YYYY|MM|DD|hh|mm|ss/g,function(){var e=n?++s:t.index=0|++t.index;return a.digit(t[e])})},a.parseCheck=function(t,e){var a=[];return t.replace(/YYYY|MM|DD|hh|mm|ss/g,function(t){a.push(t)}),a.join(1==e?"-":":")},a.checkFormat=function(t){var e=[];return t.replace(/YYYY|MM|DD|hh|mm|ss/g,function(t){e.push(t)}),e.join("-")},a.parseMatch=function(t){var e=t.split(" ");return e[0].match(n)},a.checkDate=function(t){var e=t.match(n);if(isNaN(e[0])||isNaN(e[1])||isNaN(e[2]))return!1;if(e[1]>12||e[1]<1)return!1;if(e[2]<1||e[2]>31)return!1;if((4==e[1]||6==e[1]||9==e[1]||11==e[1])&&e[2]>30)return!1;if(2==e[1]){if(e[2]>29)return!1;if((e[0]%100==0&&e[0]%400!=0||e[0]%4!=0)&&e[2]>28)return!1}return!0},a.initDates=function(t,e){if(e=e||"YYYY-MM-DD hh:mm:ss","string"==typeof t)var i=new Date(1e3*s(t.substring(0,10)));else{t=0|t;var i=new Date,n=i.getTime()+864e5*t;i.setTime(n)}var o=i.getFullYear(),r=i.getMonth()+1,l=i.getDate(),d=i.getHours(),c=i.getMinutes(),h=i.getSeconds();return a.parse([o,a.digit(r),a.digit(l)],[a.digit(d),a.digit(c),a.digit(h)],e)},a.montharr=[1,2,3,4,5,6,7,8,9,10,11,12],a.weeks=["日","一","二","三","四","五","六"],a.isValHtml=function(t){return/textarea|input/.test(t[0].tagName.toLocaleLowerCase())},a.isBool=function(t){return void 0==t||1==t?!0:!1},a.addDateTime=function(t,e,i,o){var r="hh-mm"==a.checkFormat(o).substring(0,5)?!0:!1,l=r?t.replace(/^(\d{2})(?=\d)/g,"$1,"):t.substr(0,4).replace(/^(\d{4})/g,"$1,")+t.substr(4).replace(/^(\d{2})(?=\d)/g,"$1,"),d=a.IsNum(t)?l.match(n):t.match(n),c=new Date,h=s(d[0]),u=void 0==d[1]?c.getMonth()+1:s(d[1]),m=void 0==d[2]?c.getDate():s(d[2]),f=void 0==d[3]?c.getHours():s(d[3]),p=void 0==d[4]?c.getMinutes():s(d[4]),y=void 0==d[5]?c.getMinutes():s(d[5]),v=new Date(h,a.digit(u)-1,"DD"==i?m+e:m,"hh"==i?f+e:f,"mm"==i?p+e:p,a.digit(y));return a.parse([v.getFullYear(),v.getMonth()+1,v.getDate()],[v.getHours(),v.getMinutes(),v.getSeconds()],o)},a.boxCell="#jedatebox";var r=e.prototype;return r.init=function(){var e=this,i=e.opts,n=void 0==i.zIndex?2099:i.zIndex,s=void 0==i.isinitVal||0==i.isinitVal?!1:!0,r=t("<div id="+a.boxCell.replace(/\#/g,"")+" class='jedatebox "+(i.skinCell||o.skinCell)+"'></div");a.fixed=a.isBool(i.fixed),r.attr("author","chen guojun--www.jayui.com--version:3.5"),r.css({"z-index":n,position:1==a.fixed?"absolute":"fixed",display:"block"});var l=function(t){var e,n,s=i.format||o.format,r=i.initAddVal||[0];1==r.length?(e=r[0],n="DD"):(e=r[0],n=r[1]);var l=a.initDates(0,s),d=a.addDateTime(l,e,n,s);""==(t.val()||t.text())?a.isValHtml(t)?t.val(d):t.text(d):a.isValHtml(t)?t.val():t.text()};s&&a.isBool(i.insTrigger)&&e.valCell.each(function(){l(t(this))}),a.isBool(i.insTrigger)?e.valCell.on("click",function(n){n.stopPropagation(),t(a.boxCell).length>0||(a.format=i.format||o.format,a.minDate=i.minDate||o.minDate,a.maxDate=i.maxDate||o.maxDate,t("body").append(r),e.setHtml(i))}):(a.format=i.format||o.format,a.minDate=i.minDate||o.minDate,a.maxDate=i.maxDate||o.maxDate,t("body").append(r),e.setHtml(i))},r.orien=function(t,e,i){var n,s,o,r,l=a.fixed?e[0].getBoundingClientRect():t[0].getBoundingClientRect();a.fixed?(s=l.right+t.outerWidth()/1.5>=a.winarea(1)?l.right-t.outerWidth():l.left+(i?0:a.docScroll(1)),n=l.bottom+t.outerHeight()/1<=a.winarea()?l.bottom-1:l.top>t.outerHeight()/1.5?l.top-t.outerHeight()-1:a.winarea()-t.outerHeight(),o=Math.max(n+(i?0:a.docScroll())+1,1)+"px",r=s+"px"):(o="50%",r="50%",t.css({"margin-top":-(l.height/2),"margin-left":-(l.width/2)})),t.css({top:o,left:r})},r.dateClose=function(){t(a.boxCell).remove()},r.setHtml=function(e){var i=this,o=i.valCell,r=t(a.boxCell),l="",d="",c=new Date,h=a.checkFormat(a.format),u="YYYY-MM"==h||"YYYY"==h?!0:!1,m="hh-mm"==h.substring(0,5)?!0:!1;if(a.formatType=h,""==(o.val()||o.text()))d=[c.getFullYear(),c.getMonth()+1,c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds()],a.currDate=new Date(d[0],s(d[1])-1,d[2],d[3],d[4],d[5]),a.ymdDate=d[0]+"-"+a.digit(d[1])+"-"+a.digit(d[2]);else{var f=a.isValHtml(o)?o.val():o.text(),p=m?f.replace(/^(\d{2})(?=\d)/g,"$1,"):f.substr(0,4).replace(/^(\d{4})/g,"$1,")+f.substr(4).replace(/^(\d{2})(?=\d)/g,"$1,"),y=a.IsNum(f)?p.match(n):f.match(n);m?(d="hh-mm"==h?[y[0],y[1],c.getSeconds()]:[y[0],y[1],y[2]],a.currDate=new Date(c.getFullYear(),c.getMonth()-1,c.getDate())):(d=[y[0],y[1],y[2],void 0==y[3]?c.getHours():y[3],void 0==y[4]?c.getMinutes():y[4],void 0==y[5]?c.getSeconds():y[5]],a.currDate=new Date(d[0],s(d[1])-1,d[2],d[3],d[4],d[5]),a.ymdDate=d[0]+"-"+a.digit(d[1])+"-"+a.digit(d[2]))}a.currMonth=d[1],a.currDays=d[2];var v='<div class="jedatetop">'+(u?'<div class="jedateym" style="width:100%;"><i class="prev triangle ymprev"></i><span class="jedateyy"><em class="jedateyearmonth"></em></span><i class="next triangle ymnext"></i></div>':'<div class="jedateym" style="width:50%;"><i class="prev triangle yearprev"></i><span class="jedateyy" ym="24"><em class="jedateyear"></em><em class="pndrop"></em></span><i class="next triangle yearnext"></i></div><div class="jedateym" style="width:50%;"><i class="prev triangle monthprev"></i><span class="jedatemm" ym="12"><em class="jedatemonth"></em><em class="pndrop"></em></span><i class="next triangle monthnext"></i></div>')+"</div>",g=u?"YYYY"==h?'<ul class="jedayy"></ul>':'<ul class="jedaym"></ul>':'<div class="jedatetopym" style="display: none;"><ul class="ymdropul"></ul><p><span class="jedateymchle">&lt;&lt;</span><span class="jedateymchri">&gt;&gt;</span><span class="jedateymchok">关闭</span></p></div>',j='<ol class="jedaol"></ol><ul class="jedaul"></ul>',D=u?"YYYY"==h?'<div class="botflex jedatebtn"><span class="jedateok" style="width:47.8%">确认</span><span class="jedateclear" style="width:47.8%">清空</span></div>':'<div class="botflex jedatebtn"><span class="jedateok">确认</span><span class="jedatetodaymonth">本月</span><span class="jedateclear">清空</span></div>':'<div class="botflex jedatehmsshde"><ul class="jedatehms"><li><input type="text" /></li><i>:</i><li><input type="text" /></li><i>:</i><li><input type="text" /></li></ul></div><div class="botflex jedatebtn"><span class="jedateok">确认</span><span class="jedatetodaymonth">今天</span><span class="jedateclear">清空</span></div>',x='<div class="jedatebot">'+D+"</div>",Y='<div class="jedateprophms '+(m?"jedatepropfix":"jedateproppos")+'"><div class="jedatepropcon"><div class="jedatehmstitle">时间选择<div class="jedatehmsclose">&times;</div></div><div class="jedateproptext">小时</div><div class="jedateproptext">分钟</div><div class="jedateproptext">秒数</div><div class="jedatehmscon jedateprophours"></div><div class="jedatehmscon jedatepropminutes"></div><div class="jedatehmscon jedatepropseconds"></div></div></div>',M=u?v+g+x:m?v+Y+x:v+g+j+Y+x;if(r.html(M),a.isBool(e.isClear)?"":a.isShow(r.find(".jedatebot .jedateclear"),!1),u||(a.isBool(e.isToday)?"":a.isShow(r.find(".jedatebot .jedatetodaymonth"),!1)),a.isBool(e.isOk)?"":a.isShow(r.find(".jedatebot .jedateok")[0],!1),/\hh-mm/.test(h)){var w=function(i){if(""!=o.val()||""!=o.text())var n=i?[d[0],d[1],d[2]]:[d[3],d[4],d[5]];else var n=[a.currDate.getHours(),a.currDate.getMinutes(),a.currDate.getSeconds()];r.find(".jedatebot .jedatehms input").each(function(i){t(this).val(a.digit(n[i])),a.isBool(e.ishmsVal)?"":t(this).attr("readOnly","true")})};m?(w(!0),r.find(".jedateyear").text(a.currDate.getFullYear()+"年"),r.find(".jedatemonth").text(a.digit(a.currDate.getMonth()+1)+"月")):a.isBool(e.isTime)?w(!1):(a.isShow(r.find(".jedatebot .jedatehmsshde"),!1),r.find(".jedatebot .jedatebtn").css("width","100%"))}else u||a.isShow(r.find(".jedatebot .jedatehmsshde"),!1),r.find(".jedatebot .jedatebtn").css("width","100%");if(/\YYYY-MM-DD/.test(h)&&(t.each(a.weeks,function(t,e){l+='<li class="weeks" data-week="'+e+'">'+e+"</li>"}),r.find(".jedaol").html(l),i.createDaysHtml(a.currDate.getFullYear(),a.currDate.getMonth()+1,e),i.chooseYM(e)),u){var b=r.find(".jedateym .jedateyearmonth");"YYYY"==h?(b.attr("data-onyy",d[0]).text(d[0]+"年"),r.find(".jedayy").html(i.onlyYear(d[0]))):(b.attr("data-onym",d[0]+"-"+a.digit(d[1])).text(d[0]+"年"+s(d[1])+"月"),r.find(".jedaym").html(i.onlyYMStr(d[0],s(d[1])))),i.onlyYMevents(d,e)}i.orien(r,o),setTimeout(function(){e.success&&e.success(o)},2),i.events(d,e)},r.createDaysHtml=function(e,i,o){var r=this,l=t(a.boxCell),d=s(e),c=s(i),h="",u=0,m=a.minDate.match(n),f=m[0]+m[1]+m[2],p=a.maxDate.match(n),y=p[0]+p[1]+p[2];l.find(".jedaul").html("");var v=new Date(d,c-1,1).getDay()||7,g=a.getDaysNum(d,c),j=a.getPrevMonth(d,c),D=a.getDaysNum(d,j.m),x=a.getNextMonth(d,c),Y=a.currDate.getFullYear()+"-"+a.digit(a.currDate.getMonth()+1)+"-"+a.digit(1),M=d+"-"+a.digit(c)+"-"+a.digit(1);l.find(".jedateyear").attr("year",d).text(d+"年"),l.find(".jedatemonth").attr("month",c).text(c+"月");for(var w=function(e,i,n){var s=o.marks,r=function(t,e){for(var a=t.length;a--;)if(t[a]===e)return!0;return!1};return t.isArray(s)&&s.length>0&&r(s,e+"-"+a.digit(i)+"-"+a.digit(n))?'<i class="marks"></i>':""},b=function(t,e,a){var i;if(1==o.festival){var n=jeLunar(t,e-1,a),s=n.solarFestival||n.lunarFestival,r=""!=(s&&n.jieqi)?s:n.jieqi||n.showInLunar;i='<p><span class="solar">'+a+'</span><span class="lunar">'+r+"</span></p>"}else i='<p class="nolunar">'+a+"</p>";return i},k=function(t,e,i,n){var o=(t+"-"+a.digit(e)+"-"+a.digit(i)).replace(/\-/g,"");if(n){if(s(o)>=s(f)&&s(o)<=s(y))return!0}else if(s(f)>s(o)||s(y)<s(o))return!0},C=D-v+1;D>=C;C++,u++){var F=w(j.y,j.m,C),H=k(j.y,j.m,C,!1)?"disabled":"other";h+='<li year="'+j.y+'" month="'+j.m+'" day="'+C+'" class='+H+">"+(b(j.y,j.m,C)+F)+"</li>"}for(var L=1;g>=L;L++,u++){var S="",I=w(d,c,L),N=d+"-"+a.digit(c)+"-"+a.digit(L);S=k(d,c,L,!0)?a.ymdDate==N?"action":Y!=M&&M==N?"action":"":"disabled",h+='<li year="'+d+'" month="'+c+'" day="'+L+'" '+(""!=S?"class="+S:"")+">"+(b(d,c,L)+I)+"</li>"}for(var P=1,T=42-u;T>=P;P++){var q=w(x.y,x.m,P),V=k(x.y,x.m,P,!1)?"disabled":"other";h+='<li year="'+x.y+'" month="'+x.m+'" day="'+P+'" class='+V+">"+(b(x.y,x.m,P)+q)+"</li>"}l.find(".jedaul").html(h),r.chooseDays(o)},r.onlyYMStr=function(e,i){var n="";return t.each(a.montharr,function(t,s){var o=a.parseMatch(a.minDate),r=a.parseMatch(a.maxDate),l=new Date(e,a.digit(s),"01"),d=new Date(o[0],o[1],o[2]),c=new Date(r[0],r[1],r[2]);n+=d>l||l>c?"<li class='disabled' ym='"+e+"-"+a.digit(s)+"'>"+e+"年"+a.digit(s)+"月</li>":"<li "+(i==s?'class="action"':"")+' ym="'+e+"-"+a.digit(s)+'">'+e+"年"+a.digit(s)+"月</li>"}),n},r.onlyYear=function(e){var i="";return a.yearArr=new Array(15),t.each(a.yearArr,function(n){var s=a.parseMatch(a.minDate),o=a.parseMatch(a.maxDate),r=s[0],l=o[0],d=e-7+n,c=t(a.boxCell).find(".jedateym .jedateyearmonth").attr("data-onyy");i+=r>d||d>l?"<li class='disabled' yy='"+d+"'>"+d+"年</li>":"<li "+(c==d?'class="action"':"")+" yy='"+d+"'>"+d+"年</li>"}),i},r.setStrhms=function(e){var i=t(a.boxCell),o=a.format,r=[],l=i.find(".jedatehms li"),d=i.find(".jedatepropcon .jedateproptext"),c=i.find(".jedatepropcon .jedatehmscon"),h=function(t){var e=t.match(n).join("-"),a="YYYY-MM-DD-hh-mm"==e?t.split(" "):e,i="YYYY-MM-DD-hh-mm"==e?a[1]:a;return i.match(n).join("-")},u="hh-mm"==h(o);if(u){var m=l.css("width").replace(/\px|em|rem/g,""),f=i.find(".jedatehms i").css("width").replace(/\px|em|rem/g,""),p=d.css("width").replace(/\px|em|rem/g,""),y=Math.round(s(m)+s(m)/2+s(f)/2);l[0].style.width=l[1].style.width=y+"px",d[0].style.width=d[1].style.width=c[0].style.width=c[1].style.width=Math.round(s(p)+s(p)/2+2)+"px"}return t.each([24,60,60],function(t,n){var s="",o="",h=i.find(".jedatehms input"),m=h.eq(t).val();h.eq(t).attr("maxlength",2).attr("numval",n-1).attr("item",t);for(var f=0;n>f;f++){if(f=a.digit(f),e.ishmsLimit)o=m>f?"disabled":f==m?"action":"";else if(o=u&&2==t?m==f?"disabled action":"disabled":m==f?"action":"",u&&2==t){var p=l.eq(2);p.css({display:"none"}).prev().css({display:"none"}),d.eq(t).css({display:"none"}),c.eq(t).css({display:"none"})}s+='<p class="'+o+'">'+f+"</p>"}r.push(s)}),r},r.onlyYMevents=function(e,i){var n,o=this,r=t(a.boxCell),l=r.find(".jedateym .ymprev"),d=r.find(".jedateym .ymnext"),c=s(e[0]),h=parseFloat(e[1]);t.each([l,d],function(t,e){e.on("click",function(t){t.stopPropagation(),"YYYY"==a.checkFormat(a.format)?(n=e==l?r.find(".jedayy li").attr("yy"):r.find(".jedayy li").eq(a.yearArr.length-1).attr("yy"),r.find(".jedayy").html(o.onlyYear(s(n)))):(n=e==l?c-=1:c+=1,r.find(".jedaym").html(o.onlyYMStr(n,h))),o.ymPremNextEvents(i)})})},r.nongliorien=function(t,e,i){var n,s,o,r,l=e[0].getBoundingClientRect();return s=l.right+t[0].offsetWidth/1.5>=a.winarea(1)?l.right-t[0].offsetWidth:l.left+(i?0:a.docScroll(1)),n=l.bottom+t[0].offsetHeight/1<=a.winarea()?l.bottom-1:l.top>t[0].offsetHeight/1.5?l.top-t[0].offsetHeight-1:a.winarea()-t[0].offsetHeight,o=Math.max(n+(i?0:a.docScroll())+1,1)+"px",r=s+"px",{top:o,left:r}},r.chooseDays=function(e){var i=this,n=i.valCell,o=t(a.boxCell);o.find(".jedaul li").on("click",function(i){var r=t(this),l=[];if(!r.hasClass("disabled")){i.stopPropagation(),o.find(".jedatehms input").each(function(){l.push(t(this).val())});var d=s(r.attr("year")),c=parseFloat(r.attr("month")),h=parseFloat(r.attr("day")),u=a.parse([d,c,h],[l[0],l[1],l[2]],a.format);a.isValHtml(n)?n.val(u):n.text(u),o.find(".jedaul li").removeClass("action"),t(this).addClass("action"),e.festival&&t("#jedatetipscon").remove(),(t.isFunction(e.choosefun)||null!=e.choosefun)&&e.choosefun&&e.choosefun(n,u)}}),e.festival&&o.find(".jedaul li").on("mouseover",function(){var a=t(this),i=s(a.attr("year")),n=parseFloat(a.attr("month")),o=parseFloat(a.attr("day")),l=t("<div/>",{id:"jedatetipscon","class":"jedatetipscon"}),d=jeLunar(i,n-1,o),c="<p>"+d.solarYear+"年"+d.solarMonth+"月"+d.solarDate+"日 "+d.inWeekDays+'</p><p class="red">农历：'+d.shengxiao+"年 "+d.lnongMonth+"月"+d.lnongDate+"</p><p>"+d.ganzhiYear+"年 "+d.ganzhiMonth+"月 "+d.ganzhiDate+"日</p>",h=""!=(d.solarFestival||d.lunarFestival)?'<p class="red">'+("节日："+d.solarFestival+d.lunarFestival)+"</p>":"",u=""!=d.jieqi?'<p class="red">'+(""!=d.jieqi?"节气："+d.jieqi:"")+"</p>":"",m=""!=(d.solarFestival||d.lunarFestival||d.jieqi)?h+u:"";t("body").append(l),l.html(c+m);var f=r.nongliorien(l,a);l.css({"z-index":void 0==e.zIndex?2104:e.zIndex+5,top:f.top,left:f.left,position:"absolute",display:"block"})}).on("mouseout",function(){t("#jedatetipscon").length>0&&t("#jedatetipscon").remove()})},r.chooseYM=function(e){function i(e){var a,i="";return t.each(new Array(15),function(t){if(7===t){var n=m.attr("year");a=s(e)>=s(g[0])&&s(e)<=s(D[0])?n==e?'class="action"':"":'class="disabled"',i+="<li "+a+' yy="'+e+'">'+e+"年</li>"}else a=s(e-7+t)>=s(g[0])&&s(e-7+t)<=s(D[0])?"":'class="disabled"',i+="<li "+a+' yy="'+(e-7+t)+'">'+(e-7+t)+"年</li>"}),i}function o(e,n){var o="";12==n?(t.each(a.montharr,function(t,e){var i=f.attr("month"),e=a.digit(e),n=s(m.attr("year")+e)>=s(j)&&s(m.attr("year")+e)<=s(x)?a.digit(i)==e?'class="action"':"":'class="disabled"';o+="<li "+n+' mm="'+e+'">'+e+"月</li>"}),t.each([p,y],function(t,e){a.isShow(e,!1)})):(o=i(e),t.each([p,y],function(t,e){a.isShow(e,!0)})),c.removeClass(12==n?"jedatesety":"jedatesetm").addClass(12==n?"jedatesetm":"jedatesety"),d.find(".jedatetopym .ymdropul").html(o),a.isShow(c,!0)}function r(i){d.find(".ymdropul li").on("click",function(n){var o=t(this),r=o.attr("yy"),d=s(f.attr("month"));o.hasClass("disabled")||(n.stopPropagation(),i.attr("year",r).html(r+"年"),a.isShow(c,!1),l.createDaysHtml(r,d,e))})}var l=this,d=t(a.boxCell),c=d.find(".jedatetopym"),h=d.find(".jedateyy"),u=d.find(".jedatemm"),m=d.find(".jedateyy .jedateyear"),f=d.find(".jedatemm .jedatemonth"),p=d.find(".jedateymchri"),y=d.find(".jedateymchle"),v="hh-mm"==a.checkFormat(a.format).substring(0,5)?!0:!1,g=a.minDate.match(n),j=g[0]+g[1],D=a.maxDate.match(n),x=D[0]+D[1];!v&&h.on("click",function(){var e=t(this),a=s(e.attr("ym")),i=s(m.attr("year"));o(i,a),r(m)}),!v&&u.on("click",function(){var i=t(this),n=s(i.attr("ym")),r=s(m.attr("year"));o(r,n),d.find(".ymdropul li").on("click",function(i){if(!t(this).hasClass("disabled")){i.stopPropagation();var n=t(this),o=m.attr("year"),r=s(n.attr("mm"));f.attr("month",r).html(r+"月"),a.isShow(c,!1),l.createDaysHtml(o,r,e)}})}),d.find(".jedateymchok").on("click",function(t){t.stopPropagation(),a.isShow(c,!1)});var Y=s(m.attr("year"));t.each([y,p],function(t,e){e.on("click",function(e){e.stopPropagation(),0==t?Y-=15:Y+=15;var a=i(Y);d.find(".jedatetopym .ymdropul").html(a),r(m)})})},r.ymPremNextEvents=function(e){var i=this,s=i.valCell,o=t(a.boxCell),r=new Date,l="YYYY"==a.checkFormat(a.format),d=o.find(l?".jedayy li":".jedaym li");d.on("click",function(o){if(!t(this).hasClass("disabled")){o.stopPropagation();var d=l?t(this).attr("yy").match(n):t(this).attr("ym").match(n),c=l?a.parse([d[0],r.getMonth()+1,1],[0,0,0],a.format):a.parse([d[0],d[1],1],[0,0,0],a.format);a.isValHtml(s)?s.val(c):s.text(c),i.dateClose(),(t.isFunction(e.choosefun)||null!=e.choosefun)&&e.choosefun(s,c)}})},r.events=function(e,i){var o=this,r=o.valCell,l=t(a.boxCell),d=new Date,c=l.find(".yearprev"),h=l.find(".yearnext"),u=l.find(".monthprev"),m=l.find(".monthnext"),f=l.find(".jedateyear"),p=l.find(".jedatemonth"),y="YYYY-MM"==a.checkFormat(a.format)||"YYYY"==a.checkFormat(a.format)?!0:!1,v="hh-mm"==a.checkFormat(a.format).substring(0,5)?!0:!1;if(y)o.ymPremNextEvents(i),l.find(".jedatebot .jedatetodaymonth").on("click",function(e){e.stopPropagation();var n=[d.getFullYear(),d.getMonth()+1,d.getDate()],s=a.parse([n[0],n[1],0],[0,0,0],a.format);a.isValHtml(r)?r.val(s):r.text(s),o.dateClose(),(t.isFunction(i.choosefun)||null!=i.choosefun)&&i.choosefun(r,s)});else{!v&&t.each([c,h],function(t,e){e.on("click",function(t){if("block"!=l.find(".jedatetopym").css("display")){t.stopPropagation();var a=s(f.attr("year")),n=s(p.attr("month")),r=e==c?--a:++a;e==o.createDaysHtml(r,n,i)}})}),!v&&t.each([u,m],function(t,e){e.on("click",function(t){if("block"!=l.find(".jedatetopym").css("display")){t.stopPropagation();var n=s(f.attr("year")),r=s(p.attr("month")),d=a.getPrevMonth(n,r),c=a.getNextMonth(n,r);e==u?o.createDaysHtml(d.y,d.m,i):o.createDaysHtml(c.y,c.m,i)}})});var g=o.setStrhms(i),j=function(e){t.each(e,function(t,e){""==e.html()&&e.html(g[t])}),v?(a.isShow(l.find(".jedatehmsclose"),!1),a.isShow(l.find(".jedatetodaymonth"),!1)):a.isShow(l.find(".jedateprophms"),!0),t.each(["hours","minutes","seconds"],function(e,i){var n=l.find(".jedateprop"+i),s=l.find(".jedateprop"+i+" .action");n[0].scrollTop=s[0].offsetTop-146;var o=l.find(".jedateprop"+i+" p");o.on("click",function(){var i=t(this);i.hasClass("disabled")||(o.each(function(){t(this).removeClass("action")}),i.addClass("action"),l.find(".jedatebot .jedatehms input").eq(e).val(a.digit(i.text())),v||a.isShow(l.find(".jedateprophms"),!1))})})},D=l.find(".jedateprophours"),x=l.find(".jedatepropminutes"),Y=l.find(".jedatepropseconds");v?j([D,x,Y]):l.find(".jedatehms").on("click",function(){"block"!==l.find(".jedateprophms").css("display")&&j([D,x,Y]),l.find(".jedateprophms .jedatehmsclose").on("click",function(){a.isShow(l.find(".jedateprophms"),!1)})}),l.find(".jedatebot .jedatetodaymonth").on("click",function(){var e=[d.getFullYear(),d.getMonth()+1,d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds()],n=a.parse([e[0],e[1],e[2]],[e[3],e[4],e[5]],a.format);o.createDaysHtml(e[0],e[1],i),a.isValHtml(r)?r.val(n):a.text(n),o.dateClose(),(t.isFunction(i.choosefun)||null!=i.choosefun)&&i.choosefun(r,n),y||o.chooseDays(i)})}l.find(".jedatehms input").on("keyup",function(){var e=t(this),a=e.val(),i=s(e.attr("numval")),n=s(e.attr("item"));e.val(a.replace(/\D/g,"")),a>i&&(e.val(i),alert("输入值不能大于"+i)),""==a&&e.val("00"),l.find(".jedatehmscon").eq(n).children().each(function(){t(this).removeClass("action")}),l.find(".jedatehmscon").eq(n).children().eq(s(e.val().replace(/^0/g,""))).addClass("action"),t.each(["hours","minutes","seconds"],function(t,e){var a=l.find(".jedateprop"+e),i=l.find(".jedateprop"+e+" .action");a[0].scrollTop=i[0].offsetTop-118})}),l.find(".jedatebot .jedateclear").on("click",function(e){e.stopPropagation();var n=a.isValHtml(r)?r.val():r.text();a.isValHtml(r)?r.val(""):r.text(""),o.dateClose(),""!=n&&(a.isBool(i.clearRestore)&&(a.minDate=i.startMin||a.minDate,a.maxDate=i.startMax||a.maxDate),(t.isFunction(i.clearfun)||null!=i.clearfun)&&i.clearfun(r,n))}),l.find(".jedatebot .jedateok").on("click",function(c){c.stopPropagation();var h=""!=(r.val()||r.text()),u="YYYY"==a.checkFormat(a.format),m="",g=function(){var e=[];return l.find(".jedatehms input").each(function(){e.push(t(this).val())}),e},j=a.minDate.match(n),D=j[0]+j[1]+j[2],x=a.maxDate.match(n),Y=x[0]+x[1]+x[2];if(h){var M=a.isValHtml(r)?r.val():r.text(),w=M.match(n);if(y){var b=l.find(u?".jedayy .action":".jedaym .action");if(u){var k=b?b.attr("yy").match(n):w;m=a.parse([s(k[0]),d.getMonth()+1,1],[0,0,0],a.format)}else{var C=b?b.attr("ym").match(n):w;m=a.parse([s(C[0]),s(C[1]),1],[0,0,0],a.format)}}else{var F=g(),H=[s(f.attr("year")),s(p.attr("month")),w[2]],L=H[0]+H[1]+H[2],S=s(L)>=s(D)&&s(L)<=s(Y)?!0:!1;m=h&&S?a.parse([H[0],H[1],H[2]],[F[0],F[1],F[2]],a.format):a.parse([w[0],w[1],w[2]],[F[0],F[1],F[2]],a.format),v||o.createDaysHtml(H[0],H[1],i),o.chooseDays(i)}}else{var I=g(),N=l.find(".jedateyearmonth")[0],k="";v?m=a.parse([e[0],e[1],e[2]],[I[0],I[1],I[2]],a.format):(k=y?"YYYY"==a.checkFormat(a.format)?N.attr("data-onyy").match(n):N.attr("data-onym").match(n):[d.getFullYear(),d.getMonth()+1,d.getDate()],m=u?a.parse([s(k[0]),d.getMonth(),1],[0,0,0],a.format):a.parse([s(k[0]),s(k[1]),d.getDate()],[I[0],I[1],I[2]],a.format))}a.isValHtml(r)?r.val(m):r.text(m),o.dateClose(),(t.isFunction(i.okfun)||null!=i.okfun)&&i.okfun(a.elemCell,m)}),t(document).on("mouseup",function(e){e.stopPropagation();var i=t(a.boxCell);i&&"none"!==i.css("display")&&i.remove()}),t(a.boxCell).on("mouseup",function(t){t.stopPropagation()})},t.dateVer="3.7",t.nowDate=function(t){return a.initDates(t)},t.getLunar=function(t){if(/\YYYY-MM-DD/.test(a.formatType)){var e=t.substr(0,4).replace(/^(\d{4})/g,"$1,")+t.substr(4).replace(/^(\d{2})(?=\d)/g,"$1,"),i=a.IsNum(t)?e.match(n):t.match(n),o=jeLunar(i[0],i[1]-1,i[2]);return{nMonth:o.lnongMonth,nDays:o.lnongDate,yYear:s(o.solarYear),yMonth:s(o.solarMonth),yDays:s(o.solarDate),cWeek:o.inWeekDays,nWeek:o.solarWeekDay}}},t.addDate=function(t,e,i){return e=0|e,i=i||"DD",a.addDateTime(t,e,i,a.format)},e}),function(t,e){t.jeLunar=e(t.jeLunar)}(this,function(t){function e(t){var e=function(t,e){var a=new Date(31556925974.7*(t-1900)+6e4*i[e]+Date.UTC(1900,0,6,2,5));return a.getUTCDate()},m=function(t){var e,i=348;for(e=32768;e>8;e>>=1)i+=a[t-1900]&e?1:0;return i+p(t)},f=function(t){return n.charAt(t%10)+s.charAt(t%12)},p=function(t){var e=y(t)?65536&a[t-1900]?30:29:0;return e},y=function(t){return 15&a[t-1900]},v=function(t,e){return a[t-1900]&65536>>e?30:29},g=function(t){var e,a=0,i=0,n=new Date(1900,0,31),s=(t-n)/864e5;for(this.dayCyl=s+40,this.monCyl=14,e=1900;2050>e&&s>0;e++)i=m(e),s-=i,this.monCyl+=12;for(0>s&&(s+=i,e--,this.monCyl-=12),this.year=e,this.yearCyl=e-1864,a=y(e),this.isLeap=!1,e=1;13>e&&s>0;e++)a>0&&e==a+1&&0==this.isLeap?(--e,this.isLeap=!0,i=p(this.year)):i=v(this.year,e),1==this.isLeap&&e==a+1&&(this.isLeap=!1),s-=i,0==this.isLeap&&this.monCyl++;0==s&&a>0&&e==a+1&&(this.isLeap?this.isLeap=!1:(this.isLeap=!0,--e,--this.monCyl)),0>s&&(s+=i,--e,--this.monCyl),this.month=e,this.day=s+1},j=function(t){return 10>t?"0"+(0|t):t},D=function(t,e){var a=t;return e.replace(/dd?d?d?|MM?M?M?|yy?y?y?/g,function(t){switch(t){case"yyyy":var e="000"+a.getFullYear();return e.substring(e.length-4);case"dd":return j(a.getDate());case"d":return a.getDate().toString();case"MM":return j(a.getMonth()+1);case"M":return a.getMonth()+1}})},x=function(t,e){var a;switch(e){case 10:a="初十";break;case 20:a="二十";break;case 30:a="三十";break;default:a=d.charAt(Math.floor(e/10)),a+=l.charAt(e%10)}return a};this.isToday=!1,this.isRestDay=!1,this.solarYear=D(t,"yyyy"),this.solarMonth=D(t,"M"),this.solarDate=D(t,"d"),this.solarWeekDay=t.getDay(),this.inWeekDays="星期"+l.charAt(this.solarWeekDay);var Y=new g(t);this.lunarYear=Y.year,this.shengxiao=o.charAt((this.lunarYear-4)%12),this.lunarMonth=Y.month,this.lunarIsLeapMonth=Y.isLeap,this.lnongMonth=this.lunarIsLeapMonth?"闰"+c[Y.month-1]:c[Y.month-1],this.lunarDate=Y.day,this.showInLunar=this.lnongDate=x(this.lunarMonth,this.lunarDate),1==this.lunarDate&&(this.showInLunar=this.lnongMonth+"月"),this.ganzhiYear=f(Y.yearCyl),this.ganzhiMonth=f(Y.monCyl),this.ganzhiDate=f(Y.dayCyl++),this.jieqi="",this.restDays=0,e(this.solarYear,2*(this.solarMonth-1))==D(t,"d")&&(this.showInLunar=this.jieqi=r[2*(this.solarMonth-1)]),e(this.solarYear,2*(this.solarMonth-1)+1)==D(t,"d")&&(this.showInLunar=this.jieqi=r[2*(this.solarMonth-1)+1]),"清明"==this.showInLunar&&(this.showInLunar="清明节",this.restDays=1),this.solarFestival=h[D(t,"MM")+D(t,"dd")],"undefined"==typeof this.solarFestival?this.solarFestival="":/\*(\d)/.test(this.solarFestival)&&(this.restDays=parseInt(RegExp.$1),this.solarFestival=this.solarFestival.replace(/\*\d/,"")),this.showInLunar=""==this.solarFestival?this.showInLunar:this.solarFestival,this.lunarFestival=u[this.lunarIsLeapMonth?"00":j(this.lunarMonth)+j(this.lunarDate)],"undefined"==typeof this.lunarFestival?this.lunarFestival="":/\*(\d)/.test(this.lunarFestival)&&(this.restDays=this.restDays>parseInt(RegExp.$1)?this.restDays:parseInt(RegExp.$1),this.lunarFestival=this.lunarFestival.replace(/\*\d/,"")),12==this.lunarMonth&&this.lunarDate==v(this.lunarYear,12)&&(this.lunarFestival=u["0100"],this.restDays=1),this.showInLunar=""==this.lunarFestival?this.showInLunar:this.lunarFestival}var a=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448],i=[0,21208,43467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758],n="甲乙丙丁戊己庚辛壬癸",s="子丑寅卯辰巳午未申酉戌亥",o="鼠牛虎兔龙蛇马羊猴鸡狗猪",r=["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"],l="日一二三四五六七八九十",d="初十廿卅",c=["正","二","三","四","五","六","七","八","九","十","十一","腊"],h={"0101":"*1元旦节","0202":"湿地日","0214":"情人节","0308":"妇女节","0312":"植树节","0315":"消费者权益日","0401":"愚人节","0422":"地球日","0501":"*1劳动节","0504":"青年节","0512":"护士节","0518":"博物馆日","0520":"母亲节","0601":"儿童节","0623":"奥林匹克日","0630":"父亲节","0701":"建党节","0801":"建军节","0903":"抗战胜利日","0910":"教师节",1001:"*3国庆节",1201:"艾滋病日",1224:"平安夜",1225:"圣诞节"},u={"0100":"除夕","0101":"*2春节","0115":"元宵节","0505":"*1端午节","0707":"七夕节","0715":"中元节","0815":"*1中秋节","0909":"*1重阳节",1015:"下元节",1208:"腊八节",1223:"小年"},t=function(t,a,i){return new e(new Date(t,a,i))};return t});